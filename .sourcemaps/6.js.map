{"version":3,"sources":["../../src/pages/search-leaves/search-leaves.module.ts","../../src/helper/common-methods.ts","../../src/pages/search-leaves/search-leaves.ts"],"names":[],"mappings":"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","file":"6.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { SearchLeavesPage } from './search-leaves';\r\nimport { PipesModule } from '../../pipes/pipes.module';\r\nimport {commonMethods} from '../../helper/common-methods';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    SearchLeavesPage\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(SearchLeavesPage),\r\n    PipesModule,\r\n  ],\r\n  exports:[\r\n  ],\r\n  providers:[commonMethods]\r\n})\r\nexport class SearchLeavesPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/search-leaves/search-leaves.module.ts","import { IonicPage, NavController, NavParams, ToastController } from 'ionic-angular';\r\nimport { Injectable } from '@angular/core';\r\nimport { Loading } from 'ionic-angular/components/loading/loading';\r\nimport { LoadingController } from 'ionic-angular';\r\n\r\n@Injectable()\r\nexport class commonMethods {\r\n  loader:Loading\r\n    constructor(public toastCtrl: ToastController,private loadevent:LoadingController)\r\n    {\r\n\r\n    }\r\n    showToast(alert_message: string) {\r\n        let toast = this.toastCtrl.create({\r\n          message: alert_message,\r\n          duration: 2000,\r\n          position: 'bottom'\r\n        });\r\n        toast.present(toast);\r\n      }\r\n      InitializeLoader()\r\n      {\r\n      this.loader= this.loadevent.create({\r\n        content: \"Please wait...\"\r\n      })\r\n      this.loader.present();\r\n    }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/helper/common-methods.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, ModalController } from 'ionic-angular';\r\nimport { commentsController } from '../../components/controllers/comments-controller';\r\nimport * as moment from 'moment';\r\nimport { AppContextProvider } from '../../providers/app-context/app-context';\r\nimport { LeaveServicev2Provider } from '../../providers/leave-servicev2/leave-servicev2';\r\nimport {UserServiceV2Provider} from '../../providers/user-service-v2/user-service-v2';\r\nimport {LeaveStatus} from '../../models/leavestatus.enum';\r\nimport {DetailsviewPage} from '../detailsview/detailsview';\r\n\r\n\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-search-leaves',\r\n  templateUrl: 'search-leaves.html'\r\n})\r\nexport class SearchLeavesPage {\r\n\r\n  SearchResults: boolean = false;\r\n  fromDate = new Date().toISOString();\r\n  maxToDate = moment(new Date()).add(90, 'days').format('YYYY-MM-DD');\r\n  toDate=this.maxToDate;\r\n  minFromDate = moment(new Date()).add(-90, 'days').format('YYYY-MM-DD');\r\n  responseteam=[];  \r\n  Myteam:string;\r\n  disableSelector:boolean;\r\n\r\n\r\n  constructor(private appContext: AppContextProvider,\r\n    private leavesSvc: LeaveServicev2Provider, private _userV2:UserServiceV2Provider,private alertCtrl: commentsController,private modalCtrl:ModalController) {\r\n    this.appContext.searchedLeaves.subscribe(leaves => { console.log(leaves) });\r\n    this.leavesSvc.getTeams().subscribe(teamsList=>{\r\n      this.responseteam = teamsList});\r\n      \r\n    if (this.appContext.myProfileObject.isManager) {\r\n    this.disableSelector = this.appContext.myProfileObject.isManager;\r\n      this.Myteam = \"All\";\r\n    }\r\n    else {\r\n      this.disableSelector = this.appContext.myProfileObject.isManager;\r\n      this.Myteam = this.appContext.myProfileObject.team.id;\r\n    }\r\n     \r\n  }\r\n\r\n  getMaxFromDate(toDate) {\r\n    return moment(toDate).format('YYYY-MM-DD');\r\n  }\r\n\r\n  getMinToDate(fromDate) {\r\n    return moment(fromDate).format('YYYY-MM-DD');\r\n  }\r\n\r\n  validatedate()\r\n  {\r\n    if(moment(this.fromDate).format('YYYY-MM-DD')> moment(this.toDate).format('YYYY-MM-DD'))\r\n    {\r\n     this.SearchResults=false;\r\n    }\r\n    else\r\n    this.SearchResults=true;\r\n  }\r\n\r\n  searchLeave(fromDate, toDate,value) {\r\n    var from = this.leavesSvc.getDateRange(fromDate);\r\n    var to = this.leavesSvc.getDateRange(toDate);\r\n    this._userV2.getUsersByTeamID(value.trim()).subscribe(\r\n      UsersbyTeam=>{\r\n        this.appContext.getAllTeams.next(UsersbyTeam);\r\n        this.appContext.searchedLeaves.next([]);\r\n        this.leavesSvc.searchLeavesByDateRange(from.start, to.end,this.appContext.searchedLeaves);\r\n      }\r\n    )\r\n  }\r\n\r\n  isSearchResultsAvailable() {\r\n    return this.appContext.searchedLeavesCollection && this.appContext.searchedLeavesCollection.length > 0;\r\n  }\r\n\r\n  acceptLeave(leaveID: any) {\r\n    this.leavesSvc.updateLeaveStatus(leaveID,LeaveStatus.Accepted,\"Approved\");\r\n  }\r\n\r\n  getColor(status) {\r\n    switch (status) {\r\n      case 0:\r\n        return 'gray';\r\n      case 1:\r\n        return 'green';\r\n      case 2:\r\n        return 'red';\r\n      default:\r\n        return 'orange';\r\n    }\r\n  }\r\n  \r\n  ionViewWillEnter () {\r\n\tthis.appContext.searchedLeaves.next([]);\r\n  }\r\n  ionViewWillLeave() {\r\n    this.appContext.searchedLeaves.next([]);\r\n  }\r\n\r\n  CallPrompt(keyObj: string)\r\n  {\r\n    let Modaltitle=\"Reject Leave\";\r\n    let Modalmsg=\"Do you wish to reject this leave request?\";\r\n    this.alertCtrl.presentPrompt(keyObj,Modaltitle,Modalmsg,LeaveStatus.Declined);\r\n  }\r\n\r\n  MoreInfo(obj: any) {\r\n    let leaveObj = {\r\n      name: obj.owner.name,\r\n      from: obj.from,\r\n      to: obj.to,\r\n      reason: obj.reason,\r\n      photoUrl: obj.owner.photoUrl\r\n    };\r\n  \r\n    let myModal = this.modalCtrl.create(DetailsviewPage, leaveObj);\r\n    myModal.present();\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/search-leaves/search-leaves.ts"],"sourceRoot":""}